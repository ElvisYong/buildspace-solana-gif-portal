(this["webpackJsonpbuildspace-solana"]=this["webpackJsonpbuildspace-solana"]||[]).push([[0],{104:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":231,"1":58,"2":55,"3":120,"4":244,"5":13,"6":93,"7":69,"8":102,"9":27,"10":174,"11":166,"12":214,"13":36,"14":155,"15":4,"16":254,"17":57,"18":167,"19":24,"20":103,"21":136,"22":138,"23":134,"24":39,"25":194,"26":152,"27":140,"28":138,"29":127,"30":176,"31":67},"secretKey":{"0":82,"1":27,"2":29,"3":109,"4":72,"5":120,"6":43,"7":235,"8":135,"9":136,"10":247,"11":171,"12":130,"13":0,"14":156,"15":184,"16":22,"17":188,"18":94,"19":114,"20":23,"21":147,"22":143,"23":71,"24":17,"25":117,"26":95,"27":209,"28":132,"29":15,"30":217,"31":143,"32":231,"33":58,"34":55,"35":120,"36":244,"37":13,"38":93,"39":69,"40":102,"41":27,"42":174,"43":166,"44":214,"45":36,"46":155,"47":4,"48":254,"49":57,"50":167,"51":24,"52":103,"53":136,"54":138,"55":134,"56":39,"57":194,"58":152,"59":140,"60":138,"61":127,"62":176,"63":67}}}')},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t){},115:function(e,t){},144:function(e,t){},145:function(e,t){},169:function(e,t,n){"use strict";n.r(t);var a=n(24),c=n.n(a),r=n(100),s=n.n(r),i=(n(110),n(1)),o=n.n(i),u=n(3),l=n(9),p=(n.p,n(111),n(8)),b=n(30),d=n(104),f=n(49),m=n(15),g=b.d.SystemProgram,h=Object.values(d._keypair.secretKey),j=new Uint8Array(h),y=b.d.Keypair.fromSecretKey(j),v=new p.PublicKey(f.metadata.address),x=Object(p.clusterApiUrl)("devnet"),w="processed",O=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),i=s[0],d=s[1],h=Object(a.useState)([]),j=Object(l.a)(h,2),O=j[0],k=j[1],S=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.solana)){e.next=12;break}if(!n.isPhantom){e.next=10;break}return console.log("Phantom wallet found!"),e.next=7,n.connect();case 7:a=e.sent,console.log("Connected with Public Key:",a.publicKey.toString()),c(a.publicKey.toString());case 10:e.next=14;break;case 12:alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b"),window.open("https://phantom.app/","_blank");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=9;break}return e.next=4,n.connect();case 4:a=e.sent,console.log("Connected with Public Key:",a.publicKey.toString()),c(a.publicKey.toString()),e.next=10;break;case 9:window.open("https://phantom.app/","_blank");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=new p.Connection(x,w);return new b.b(e,window.solana,w)},A=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=N(),n=new b.a(f,v,t),console.log("ping"),e.next=6,n.rpc.initialize({accounts:{baseAccount:y.publicKey,user:t.wallet.publicKey,systemProgram:g.programId},signers:[y]});case 6:return console.log("Created a new BaseAccount w/ address:",y.publicKey.toString()),e.next=9,P();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error creating BaseAccount account:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),G=function(e){var t=e.target.value;d(t)},I=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.length){e.next=3;break}return alert("Please enter a GIF URL!"),e.abrupt("return");case 3:return console.log("Gif link: ",i),e.prev=4,t=N(),n=new b.a(f,v,t),e.next=9,n.rpc.addGif(i,{accounts:{baseAccount:y.publicKey,user:t.wallet.publicKey}});case 9:return console.log("GIF successfully sent to program",i),e.next=12,P();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log("Error sending GIF:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){window.addEventListener("load",function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var P=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=N(),n=new b.a(f,v,t),e.next=5,n.account.baseAccount.fetch(y.publicKey);case 5:a=e.sent,console.log("Got the account",a),k(a.gifList),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error in getGifs",e.t0),k(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n&&(console.log("Fetching GIF list..."),P())}),[n]),Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("div",{className:n?"authed-container":"container",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"header-container",children:[Object(m.jsx)("p",{className:"header",children:"Ayame GIF Portal"}),Object(m.jsx)("p",{className:"sub-text",children:"View your Ayame GIF collection in the metaverse \u2728"}),!n&&Object(m.jsx)("button",{className:"cta-button connect-wallet-button",onClick:K,children:"Connect to Wallet"}),n&&(null===O?Object(m.jsx)("div",{className:"connected-container",children:Object(m.jsx)("button",{className:"cta-button submit-gif-button",onClick:A,children:"Do One-Time Initialization For GIF Program Account"})}):Object(m.jsxs)("div",{className:"connected-container",children:[Object(m.jsx)("input",{type:"text",placeholder:"Enter gif link!",value:i,onChange:G}),Object(m.jsx)("button",{className:"cta-button submit-gif-button",onClick:I,children:"Submit"}),Object(m.jsx)("div",{className:"gif-grid",children:O.map((function(e,t){return Object(m.jsx)("div",{className:"gif-item",children:Object(m.jsx)("img",{alt:"loading",src:e.gifLink})},t)}))})]}))]})})})})};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root"))},49:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"ayamegifsolana","instructions":[{"name":"initialize","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false}],"args":[{"name":"gifLink","type":"string"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"}]}}],"metadata":{"address":"7fFqkK9ScNdwZnGoVhCBjc1zMynoiND95mcQWqr8tamR"}}')}},[[169,1,2]]]);
//# sourceMappingURL=main.a5ada486.chunk.js.map